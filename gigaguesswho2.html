<!DOCTYPE html>
<htmL lang="en" style="font-size: 64px;">
<head>
<meta charset="UTF-8">
<title>
Casino Cops
</title>
<style>
	#personsGrid {
	    display: grid;
	    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); /* Adjust minmax values as needed */
	    gap: 10px; /* Space between items */
	    padding: 10px;
	}

	.personItem {
	    border: 1px solid #ccc;
	    padding: 10px;
	    text-align: center;
	}
</style>

</head>


<body>
	<div id="personsGrid"></div>
</body>

<script type="text/javascript">
	

class Person{
	eliminated = false;
	skin = -1;
	eyes = -1;
	hair = -1;
	shirt = -1;

	constructor(){
		this.eliminated = false;
		this.eyes = Math.ceil(Math.random()*3);
	}

	equalTo(suspect){
		return (
			this.eyes == suspect.eyes
		);
	}

	toString() {
        let eyeRep = ['E1', 'E2', 'E3'][this.eyes - 1]; // Map eye trait to its text representation
        // Map other traits similarly
        return `${eyeRep}`;
    }
}

class CluePool{
	cluePool = [];
	constructor(Clues){
		this.cluePool = Clues;
		this.filterClues(perp);
		//Shuffle cluePool


		///!!!!!!!
	}
	getClue(){
		if (this.cluePool.length > 0){
			return this.cluePool.pop();
		}
		return null;
	}
	filterClues(excludedIndividual){
		var temp = [];
		this.cluePool.forEach((item) => {
			if (item.value != excludedIndividual[item.attribute]){
				temp.push(item);
			}
		});
		this.cluePool = temp;
	}
	usable(){
		return this.cluePool.length > 0;
	}
}

class Clue{
	attribute = null;
	value = null;
	constructor(att, val){
		this.attribute = att;
		this.value = val;
	}
}

var suspectsLeft = 5;
var suspects = [];
var perp = new Person(); 
var button1 = new CluePool([new Clue('eyes', 1),new Clue('eyes', 2),new Clue('eyes', 3)]);
button1.filterClues(perp);

generateSuspects();
drawSuspects();

document.addEventListener('keydown', function(event){
	console.log("Investigating");
	var clue = null;
	if (button1.usable()){
		clue = button1.getClue();
		applyClue(clue);
	}
	drawSuspects();
	console.log ("perp " + perp.eyes);
});

function generateSuspects(count){
	var perp = new Person();
	suspects.push(perp);
	var temp;
	while (suspects.length < suspectsLeft){
		temp = new Person();
		if (!temp.equalTo(perp)){
			suspects.push(temp);
		} 
	}
}

function applyClue(clue){
	suspects.forEach((item) => {
		if (item[clue.attribute] == clue.value){
			if (!item.eliminated){
				item.eliminated = true;
				suspectsLeft = suspectsLeft - 1
			}
		}
	});
}

function updateGrid() {
    const grid = document.getElementById('personsGrid');
    grid.innerHTML = ''; // Clear existing grid content

    suspects.forEach(person => {
    	console.log("adding person");
        const personDiv = document.createElement('div');
        personDiv.classList.add('person');
        personDiv.textContent = person.toString(); // Use your method to get text representation
        if (person.eliminated){
        	personDiv.textContent = "X";
        }
        grid.appendChild(personDiv);
    });
}

function drawSuspect(suspect){
	if (suspect.eliminated){
		console.log('X');
		return;
	}
	console.log(suspect.toString());
}

function drawSuspects(){
	updateGrid();
	suspects.forEach((item) => drawSuspect(item));
}


</script>

</html>